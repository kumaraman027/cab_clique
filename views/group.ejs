<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="/styles/style21.css" />
    <link rel="stylesheet" href="/styles/style22.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500&display=swap"
    />
    <style>
      .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
      }

      .modal-content {
        background-color: #fefefe;
       
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 600px;
        border-radius: 10px;
      }

      .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
      }

      .close:hover,
      .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="vector-parent">
      <img class="frame-child" alt="" src="./public/pngwing.com.png" />
      <a href="/logout" class="btn btn-danger">Logout</a>

      <header class="taxi-logo-removebg-preview-2-parent">
        <img
          class="taxi-logo-removebg-preview-2-icon"
          loading="lazy"
          alt=""
          src="styles/pngwing.com.png"
        />

        <div class="frame-wrapper">
          <a class="frame-parent">
            <div class="frame-wrapper11">
              <ul>
                <header style="padding-top: 30px;">
                  <!-- Your existing header content -->
                  <button id="messageButton">Message</button>
                  <!-- Modal for displaying messages -->
                  <div id="messageModal" class="modal">
                    <div class="modal-content">
                      <span class="close">&times;</span>
                      <h2>Your Messages</h2>
                      <ul id="messageList" class="message-list"></ul>
                    </div>
                  </div>
                </header>
                <li><a class="a1">Teams</a></li>
              </ul>
              <button class="button-9" id="profileButton">Profile</button>
              <div class="greeting">Hey, <%= username %>!</div>
  <div class="profile-container">
    <img src="<%= profilepic %>" alt="Profile Picture" class="profile-pic" />
  </div>
              <button id="joinButton" class="button-8">Join</button>
              <button id="yourgrp" class="button-8">Your Group</button>
              <script>
                document
                  .getElementById("joinButton")
                  .addEventListener("click", function () {
                    
                    window.location.href = "/joingroup";
                   
                  });
                // document
                //   .getElementById("homebutton")
                //   .addEventListener("click", function () {
                //     window.location.href = "/";
                //   });
                document
                  .getElementById("yourgrp")
                  .addEventListener("click", function () {
                    // alert("called");
                    window.location.href = "/yourgroup";
                  });
              </script>
            </div>
          </a>
        </div>
      </header>
      <section class="frame-section">
        <div class="frame-group">
          <div class="create-group-wrapper">
            <h1 class="create-group">Create Group</h1>
          </div>
          <div class="rectangle-parent">
            <div class="frame-item"></div>

            <img
              class="image-6-icon"
              loading="lazy"
              alt=""
              src="styles/—Pngtree—hand painted cartoon lovely college_3942677.png"
            />
            <form action="/create" method="post">
            <div class="create">
              <input
                class="create-child"
                name="vacancy"
                id="vacancyInput"
                placeholder="Vacancy:"
                type="number"
              />
              <input
                class="create-child"
                id="timeInput"
                name="time"
                placeholder="Time:"
                type="text"
              />
              <input
                class="create-child"
                id="dateInput"
                name="date"
                placeholder="Date:"
                type="date"
              />
              <input
                class="create-child"
                id="fromLocationInput"
                placeholder="From:"
                name="from_location"
                type="text"
              />
              <input
                class="create-child"
                id="toLocationInput"
                name="to_location"
                placeholder="Destination:"
                type="text"
              /> <input
              class="create-child"
              id="type"
              name="type"
              placeholder="Cab or Auto"
              type="text"
            />
              <!-- <button type="submit" class="create1">Add</button> -->
              </form>
              <div class="frame-parent1">
                <div class="frame-wrapper3">
                  <div class="rectangle-container"></div>
                </div>
                <button type="submit" class="create1">create</button>
                <!-- <button id="createButton" class="create1">Create</button> -->
                <script>
                  document
                    .getElementById("createButton")
                    .addEventListener("click", function () {
                      // Collect the form data
                      const data = {
                        vacancy: document.getElementById("vacancyInput").value,
                        time: document.getElementById("timeInput").value,
                        date: document.getElementById("dateInput").value.substring(0,15),
                        from_location: document.getElementById(
                          "fromLocationInput"
                        ).value,
                        to_location: document.getElementById("toLocationInput")
                          .value,
                      };

                      // Send the form data to the server
                      fetch("/create", {
                        method: "POST",
                        headers: {
                          "Content-Type": "application/json",
                        },
                        body: JSON.stringify(data),
                      })
                        .then((response) => {
                          if (response.ok) {
                            alert("Group created successfully!");
                          } else {
                            alert("Error creating group.");
                          }
                        })
                        .catch((error) => {
                          console.error("Error:", error);
                          alert("An error occurred. Please try again.");
                        });
                    });
                </script>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div id="profileModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Profile</h2>

        <input id="nameInput" type="text" placeholder="Name" />
        <input id="phoneInput" type="text" placeholder="Phone Number" />
        <input type="file" accept="image/*" />
        <button id="saveProfileBtn">Save</button>
      </div>
    </div>
    <script>
      var modal = document.getElementById("profileModal");
      var profileBtn = document.getElementById("profileButton");
      var closeBtn = document.querySelector(".close");
      var saveProfileBtn = document.getElementById("saveProfileBtn");

      profileBtn.onclick = function () {
        modal.style.display = "block";
      };

      closeBtn.onclick = function () {
        modal.style.display = "none";
      };

      window.onclick = function (event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };

      saveProfileBtn.onclick = function () {
        var name = document.getElementById("nameInput").value.trim();
        var phone = document.getElementById("phoneInput").value.trim();

        var nameRegex = /^[a-zA-Z\s]+$/;
        var phoneRegex = /^\d{10}$/;

        if (!nameRegex.test(name)) {
          alert("Please enter a valid name.");
          return;
        }

        if (!phoneRegex.test(phone)) {
          alert("Please enter a valid 10-digit phone number.");
          return;
        }

        alert("Profile successfully submitted!");
        modal.style.display = "none";
      };
    </script>


  <script>
    document.getElementById('messageButton').addEventListener('click', function() {
      fetch('/fetchMessages')
        .then(response => response.json())
        .then(data => {
          const messageList = document.getElementById('messageList');
          messageList.innerHTML = ''; // Clear existing messages

          if (data.messages.length === 0) {
            messageList.innerHTML = '<li>No messages found.</li>';
          } else {
            data.messages.forEach(msg => {
              const li = document.createElement('li');
              li.className = 'message-item';
              li.textContent = msg.message;
              messageList.appendChild(li);
            });
          }
          document.getElementById('messageModal').style.display = 'block';
        })
        .catch(error => {
          console.error('Error fetching messages:', error);
        });
    });

    var modal = document.getElementById("messageModal");
    var closeBtn = document.querySelector(".close");

    closeBtn.onclick = function() {
      modal.style.display = "none";
    };

    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    };
  </script>
  </body>
</html>




























